<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<link rel="stylesheet" href="cart.css">
  </head>
  <body>
    <div class="col-6 cartdiv1">
      <div id="cartdiv"></div>
      <p>total: $<span id="cart-total">0.00</span></p>
      <button class="checkout" onclick="checkout()">proceed to pay</button>
      
    </div>






            




    
















    <!-- Display the quantity only when there is more than one item -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let cartdiv = document.querySelector("#cartdiv");
        let carttotal = document.querySelector("#cart-total");

        function displayCart() {
          let storedCartData = localStorage.getItem("cartData");
          let cartData = storedCartData ? JSON.parse(storedCartData) : [];

          var total = 0;

          cartdiv.innerHTML = "";
          cartData.forEach(function (item, index) {
            let div = document.createElement("div");
            let span1 = document.createElement("span");
            let span2 = document.createElement("span");
            let span3 = document.createElement("span");
            let span22 = document.createElement("span");
            let deleteButton = document.createElement("button");

            cartdiv.appendChild(div);
            div.appendChild(span1);
            span1.appendChild(span2);
            span1.appendChild(span3);
            span1.appendChild(span22);

            div.appendChild(deleteButton);
            span1.classList.add("sp1");
            span2.classList.add("sp2");
            span3.classList.add("sp3");
            deleteButton.classList.add("dbtn");
            div.classList.add("divjs")

            span2.innerHTML = item.name;
            span22.innerHTML= item.price

            if (item.quantity > 0) {
              span3.innerHTML = ` ${item.quantity}`;
            }

            deleteButton.innerText = "Delete";
            deleteButton.addEventListener("click", function () {
              // Remove the item from the cartData array
              cartData.splice(index, 1);

              // Update the local storage
              localStorage.setItem("cartData", JSON.stringify(cartData));

              // Re-render the cart
              displayCart();
            });

            total += item.price * item.quantity;
          });

          carttotal.innerHTML = + total.toFixed(2);
        }

        displayCart();
      });

      function checkout() {
        alert("Arrive on nov 21");
       cartdiv.innerHTML="";
       document.getElementById("cart-total").innerHTML="0";
localStorage.clear()

      }
    </script>
  </body>
</html>
